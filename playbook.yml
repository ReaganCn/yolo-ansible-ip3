---
- hosts: all
  become: yes

  pre_tasks:
  - name: Update apt cache if needed
    apt: update_cache=yes cache_valid=3600

  - name: "Install required dependencies"
    apt: 
      state: present
      name: 
        - apt-transport-https
        - ca-certificates
        - curl
        - software-properties-common
        - python3-pip
        - virtualenv
        - python3-setuptools

  - name: "Clone repository"
    git:
      repo: https://github.com/ReaganCn/yolo.git
      dest: /opt/yolo
      clone: yes
      update: yes
  
  roles:
    - setup-docker
    - client
    - backend
    - mongodb
